//
// Битовое задание
// Project Type : Win32 Console Application
// Project Name : Progect1.cpp
// Programmers : 
// Рыбин Тимофей Вячеславович
// Скынтей Максим Викторович
// Modifyed by :
// Created : 25.09.25
//

#include <iostream> // подключение ввода и выводи
#include <iomanip> // управление форматирование вывода
#include <cmath> 
using namespace std;

/*********************************************************/
/*      Г Л О Б А Л Ь Н Ы Е   К О Н С Т А Н Т Ы   */
/********************************************************/
int x;          // значение аргумента функции
double eps;     // точность вычислений (погрешность)
/******************************************************* */
/*     О С Н О В Н А Я   П Р О Г Р А М М А         */
/********************************************************/

int main() {
    
    cout << "Введите x: ";   // запрос ввода аргумента
    cin >> x;                // ввод значения x с клавиатуры
    cout << "Введите eps: "; // запрос ввода точности
    cin >> eps;              // ввод значения eps с клавиатуры
    if (eps > 0) {
    int N = 1;               // номер итерации ряда (начинаем с 1, так как 0-й член уже учтен)
    double sum = 1;        // частичная сумма ряда, первый член ряда (n=0) равен 1
    double exept = (exp(x) + exp(-x)) / 2; // эталонное значение функции cosh(x)
    double diff = fabs(sum - exept);         // разница между суммой и эталоном

    double term = 1;       // текущее слагаемое ряда, начинаем с 1 (для n=0)
    int factorial = 1;       // переменная для факториала (оставлена для совместимости)

    while (diff > eps) {     // выполняем цикл, пока погрешность больше требуемой
        // вычисляем следующее слагаемое через предыдущее:
        // term_{n+1} = term_n * (x^2) / ((2n-1)(2n))
        double argx = term * (x * x);
        double factorial2N = ((2 * N - 1) * (2 * N));
        double slog = argx / factorial2N; // сохраняем текущее слагаемое (для наглядности)

        sum += slog;         // прибавляем слагаемое к сумме

        diff = fabs(sum - exept); // пересчитываем разницу с эталонным значением
        N++;                 // увеличиваем счётчик итераций
    }

    // выводим результаты
    cout << "SUM = " << sum   // сумма, полученная по ряду
         << "\nCOUNT = " << N // количество членов ряда
         << "\nDIFF = " << diff << endl; // окончательная погрешность
  }
    return 0; // завершение программы
}

